#### 交换机的工作原理



1，交换机属于数据链路层设备，数据链路层传输的是数据帧，说封装的是MAC头部（主要有源MAC，目标MAC）差错校验

2，数据链路层功能

- 建立逻辑连接，进行物理地址寻址，差错校验
- 数据链路的建立，维护和拆除
- 数据帧的封装，传输，同步，差错校验，在数据链路层也可以做流量控制（但是一般情况下不在数据链路层做流控）

3，以太网发展史

- 10BASE-T
- 100BASE-T
- 1000BASE-T

4，早期的网络为共享式网络，目前所使用的是交换式网络

- 交换式网络
  - 以太网交换机
  - 以太网MAC地址

5，以太网的MAC

- 用来标识一个以太网上的某个单独的设备或一组设备；IP地址：用来标识网络中的某一主机
  - 两个设备如果想在**以太网中进行通信**，必须要**MAC地址**进行交互
  - 两个设备如果想在**网络中进行通信**，必须配置相应**IP地址**
- 区别：
- MAC地址由48位的二进制组成，通常表示为12位的16进制
- 一个MAC地址的表示方式：前24位表示厂商得编码，后面24位为序列号，从而实现全球唯一
- 单独设备：当第8位为0的时候表示是单独设备，称为单播地址
- 一组设备：但第8位为1的时候表示是一组设备，称为组播地址
- 所有设备：FF-FF-FF-FF-FF-FF，一个全为1的MAC地址称为广播地址
- 00-00-00-00-00-00：默认填充地址，当不知道目标MAC地址时，会自动填充一个目的MAC地址

6，以太网的帧

- Ethernet ||
- IEEE802.3帧

7，以太网交换机

- 早期采用共享式以太网，它是由集线器（HUB）相连
  - 一个冲突域的网络

- 现在采用交换式网络（以太网交换机）
  - 广播：一种信息的传播方式；一对多的方式

- 工作模式
  - 单工：数据报文只能单向传输
  - 半双工：数据可以双向传输，但不能同时进行
  - 全双工：数据可以双向并且同时进行

- 接口速率
  - 10
  - 100
  - 1000

- 具体工作流程：

![image-20220901222647563](https://raw.githubusercontent.com/Bssn520/Images/master/Test/202212201809079.png)

![image-20220901222622031](https://raw.githubusercontent.com/Bssn520/Images/master/Test/202212201809080.png)



#### 交换机的基本配置

1，掌握思科设备的命令行配置

2，会对交换机进行基本配置

3，会通过telnet和ssh对交换机进行远程管理

##### 一，思科设备命令行基础

1，进入设备的命令行界面

- 设备支持命令行
  - 去查看设备上的接口，是否有console
- 需要有console线
- 终端软件进行连接
  - putty
  - xshell

2，命令行基础

- 思科设备的命令行模式

  - 用户模式：查看统计信息（用的很少），用“>”表示

    - 用户模式切换至特权模式

    - ```shell
      enable
      en	#简写
      ```

  - 特权模式：查看并修改设备的配置（大多情况为查看），用“#”表示

    - 特权模式切换至全局模式

    - ```shell
      configure terminal
      conf t	#简写
      ```

  - 全局模式：针对设备的整体配置参数，用“(config)#”

    - 全局模式切换至接口模式

    - ```shell
      interface fastethernet0/1
      int f0/1	#简写
      ```

  - 接口模式：针对设备的接口修改配置参数，用“(config-if)#”表示

  - 进入对应模式，只能一级一级进入

  - 返回对应模式，一级一级返回用“exit”，如果想要快速返回到特权模式，可以用“end”命令。

3，常见配置

- 配置主机名

  - ```
    hostname xxxxxx
    ```

- 查看MAC地址表

  - ```
    show mac-address-table
    ```

  ![image-20220902155516046](https://raw.githubusercontent.com/Bssn520/Images/master/Test/202212201809081.png)

  

##### 二，通过远程管理方式连接交换机(telnet , ssh)

1，telnet 为应用层协议，基于传输层TCP，port：23，采用明文密码方式，一般用于内网管理

2，ssh 为应用层协议，基于传输层TCP，port：23，采用密文密码方式

3，思路

telnet

- 既然是通过网络的方式进行管理，设备就必须配置IP地址，由于交换机上的接口都是交换接口，是不允许配置IP的，直接为交换机的虚拟接口配置IP地址，默认情况下交换机的默认虚拟接口就是vlan1接口

- ```
  en		#进入特权模式
  conf  t		#进入全局模式
  int vlan1		#进入vlan1接口配置
  ip address 192.168.100.100 255.255.255.0
  no shutdown		#开启接口
  ```

- 配置设备的来连接终端并直接设置密码，应用

- ```
  conf t
  line vty 0 4
  psaaword Bssn
  login		#表示直接使用密码登录
  ```

- 创建链接用户名和密码，配置设备的连接终端并应用

- ```
  conf t
  username Bssn password bssn
  login local		#表示使用用户名密码登录
  ```

SSH

- ```
  配置：
  hoostname bssn		#设置主机名
  ip domain-name bssn.cf		#设置域名
  crypto key generate rsa		#创建密钥，位数一般为1024或2048
  ip ssh time-out 120		#设置超时时间120s
  ip ssh authentication-retries 5		#设置密码最大错误次数
  username Bssn password 白衫少年
  ###别忘记配置特权模式密码
  line vty 0 4		#进入配置模式
  login local			#设置为需要用户名密码才能登录
  ```


4，设置特权模式密码(当同时设置了明文和密文密码时，安全级别高的生效)

```
enable password 123		#明文形式
enable secert 456		#密文形式
running-config		#查看当前配置文件，可以查看密码
```

5，擦除个人配置并重启

```
erase startup-config
reload
```







